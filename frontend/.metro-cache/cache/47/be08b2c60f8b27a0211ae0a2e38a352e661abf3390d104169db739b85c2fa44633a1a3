{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":69,"index":69}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":111},"end":{"line":3,"column":39,"index":150}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.authenticatedFetch = authenticatedFetch;\n  exports.getBackendURL = getBackendURL;\n  exports.getStoredToken = getStoredToken;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[2], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _expoConstants = require(_dependencyMap[3], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  const BACKEND_URL = Constants.default.expoConfig?.extra?.backendUrl || _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || 'https://sinadicciones-app-production.up.railway.app';\n  // Helper to get token from storage (works on both web and mobile)\n  const getToken = async () => {\n    if (Platform.default.OS === 'web' && typeof window !== 'undefined') {\n      return localStorage.getItem('session_token');\n    }\n    return await AsyncStorage.default.getItem('session_token');\n  };\n\n  /**\n   * Helper function to make authenticated API requests\n   * Uses Authorization header with token from storage\n   * Automatically prepends BACKEND_URL if the url starts with /api\n   */\n  async function authenticatedFetch(url, options = {}) {\n    const headers = Object.assign({\n      'Content-Type': 'application/json'\n    }, options.headers);\n\n    // Add Authorization header with token from storage\n    const token = await getToken();\n    if (token) {\n      headers['Authorization'] = `Bearer ${token}`;\n    }\n\n    // Prepend BACKEND_URL if url starts with /api (relative URL)\n    const fullUrl = url.startsWith('/api') ? `${BACKEND_URL}${url}` : url;\n\n    // Make the request\n    return fetch(fullUrl, Object.assign({}, options, {\n      headers,\n      credentials: 'include'\n    }));\n  }\n\n  /**\n   * Get the backend URL\n   */\n  function getBackendURL() {\n    return BACKEND_URL;\n  }\n\n  /**\n   * Get stored token from storage\n   */\n  async function getStoredToken() {\n    return await getToken();\n  }\n});","lineCount":70,"map":[[12,2,24,0,"exports"],[12,9,24,0],[12,10,24,0,"authenticatedFetch"],[12,28,24,0],[12,31,24,0,"authenticatedFetch"],[12,49,24,0],[13,2,50,0,"exports"],[13,9,50,0],[13,10,50,0,"getBackendURL"],[13,23,50,0],[13,26,50,0,"getBackendURL"],[13,39,50,0],[14,2,57,0,"exports"],[14,9,57,0],[14,10,57,0,"getStoredToken"],[14,24,57,0],[14,27,57,0,"getStoredToken"],[14,41,57,0],[15,2,59,1],[15,6,59,1,"_expoVirtualEnv"],[15,21,59,1],[15,24,59,1,"require"],[15,31,59,1],[15,32,59,1,"_dependencyMap"],[15,46,59,1],[16,2,1,0],[16,6,1,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,1,0],[16,45,1,0,"require"],[16,52,1,0],[16,53,1,0,"_dependencyMap"],[16,67,1,0],[17,2,1,0],[17,6,1,0,"AsyncStorage"],[17,18,1,0],[17,21,1,0,"_interopDefault"],[17,36,1,0],[17,37,1,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,1,0],[18,2,1,69],[18,6,1,69,"_reactNativeWebDistExportsPlatform"],[18,40,1,69],[18,43,1,69,"require"],[18,50,1,69],[18,51,1,69,"_dependencyMap"],[18,65,1,69],[19,2,1,69],[19,6,1,69,"Platform"],[19,14,1,69],[19,17,1,69,"_interopDefault"],[19,32,1,69],[19,33,1,69,"_reactNativeWebDistExportsPlatform"],[19,67,1,69],[20,2,3,0],[20,6,3,0,"_expoConstants"],[20,20,3,0],[20,23,3,0,"require"],[20,30,3,0],[20,31,3,0,"_dependencyMap"],[20,45,3,0],[21,2,3,0],[21,6,3,0,"Constants"],[21,15,3,0],[21,18,3,0,"_interopDefault"],[21,33,3,0],[21,34,3,0,"_expoConstants"],[21,48,3,0],[22,2,5,0],[22,8,5,6,"BACKEND_URL"],[22,19,5,17],[22,22,5,20,"Constants"],[22,31,5,29],[22,32,5,29,"default"],[22,39,5,29],[22,40,5,30,"expoConfig"],[22,50,5,40],[22,52,5,42,"extra"],[22,57,5,47],[22,59,5,49,"backendUrl"],[22,69,5,59],[22,73,5,59,"_expoVirtualEnv"],[22,88,5,59],[22,89,5,59,"env"],[22,92,5,59],[22,93,5,59,"EXPO_PUBLIC_BACKEND_URL"],[22,116,5,98],[22,120,5,102],[22,173,5,155],[23,2,11,0],[24,2,12,0],[24,8,12,6,"getToken"],[24,16,12,14],[24,19,12,17],[24,25,12,17,"getToken"],[24,26,12,17],[24,31,12,53],[25,4,13,2],[25,8,13,6,"Platform"],[25,16,13,14],[25,17,13,14,"default"],[25,24,13,14],[25,25,13,15,"OS"],[25,27,13,17],[25,32,13,22],[25,37,13,27],[25,41,13,31],[25,48,13,38,"window"],[25,54,13,44],[25,59,13,49],[25,70,13,60],[25,72,13,62],[26,6,14,4],[26,13,14,11,"localStorage"],[26,25,14,23],[26,26,14,24,"getItem"],[26,33,14,31],[26,34,14,32],[26,49,14,47],[26,50,14,48],[27,4,15,2],[28,4,16,2],[28,11,16,9],[28,17,16,15,"AsyncStorage"],[28,29,16,27],[28,30,16,27,"default"],[28,37,16,27],[28,38,16,28,"getItem"],[28,45,16,35],[28,46,16,36],[28,61,16,51],[28,62,16,52],[29,2,17,0],[29,3,17,1],[31,2,19,0],[32,0,20,0],[33,0,21,0],[34,0,22,0],[35,0,23,0],[36,2,24,7],[36,17,24,22,"authenticatedFetch"],[36,35,24,40,"authenticatedFetch"],[36,36,24,41,"url"],[36,39,24,52],[36,41,24,54,"options"],[36,48,24,75],[36,51,24,78],[36,52,24,79],[36,53,24,80],[36,55,24,101],[37,4,25,2],[37,10,25,8,"headers"],[37,17,25,39],[37,20,25,39,"Object"],[37,26,25,39],[37,27,25,39,"assign"],[37,33,25,39],[38,6,26,4],[38,20,26,18],[38,22,26,20],[39,4,26,38],[39,7,27,7,"options"],[39,14,27,14],[39,15,27,15,"headers"],[39,22,27,22],[39,23,28,3],[41,4,30,2],[42,4,31,2],[42,10,31,8,"token"],[42,15,31,13],[42,18,31,16],[42,24,31,22,"getToken"],[42,32,31,30],[42,33,31,31],[42,34,31,32],[43,4,32,2],[43,8,32,6,"token"],[43,13,32,11],[43,15,32,13],[44,6,33,4,"headers"],[44,13,33,11],[44,14,33,12],[44,29,33,27],[44,30,33,28],[44,33,33,31],[44,43,33,41,"token"],[44,48,33,46],[44,50,33,48],[45,4,34,2],[47,4,36,2],[48,4,37,2],[48,10,37,8,"fullUrl"],[48,17,37,15],[48,20,37,18,"url"],[48,23,37,21],[48,24,37,22,"startsWith"],[48,34,37,32],[48,35,37,33],[48,41,37,39],[48,42,37,40],[48,45,37,43],[48,48,37,46,"BACKEND_URL"],[48,59,37,57],[48,62,37,60,"url"],[48,65,37,63],[48,67,37,65],[48,70,37,68,"url"],[48,73,37,71],[50,4,39,2],[51,4,40,2],[51,11,40,9,"fetch"],[51,16,40,14],[51,17,40,15,"fullUrl"],[51,24,40,22],[51,26,40,22,"Object"],[51,32,40,22],[51,33,40,22,"assign"],[51,39,40,22],[51,44,41,7,"options"],[51,51,41,14],[52,6,42,4,"headers"],[52,13,42,11],[53,6,43,4,"credentials"],[53,17,43,15],[53,19,43,17],[54,4,43,26],[54,6,44,3],[54,7,44,4],[55,2,45,0],[57,2,47,0],[58,0,48,0],[59,0,49,0],[60,2,50,7],[60,11,50,16,"getBackendURL"],[60,24,50,29,"getBackendURL"],[60,25,50,29],[60,27,50,40],[61,4,51,2],[61,11,51,9,"BACKEND_URL"],[61,22,51,20],[62,2,52,0],[64,2,54,0],[65,0,55,0],[66,0,56,0],[67,2,57,7],[67,17,57,22,"getStoredToken"],[67,31,57,36,"getStoredToken"],[67,32,57,36],[67,34,57,63],[68,4,58,2],[68,11,58,9],[68,17,58,15,"getToken"],[68,25,58,23],[68,26,58,24],[68,27,58,25],[69,2,59,0],[70,0,59,1],[70,3]],"functionMap":{"names":["<global>","getToken","authenticatedFetch","getBackendURL","getStoredToken"],"mappings":"AAA;iBCW;CDK;OEO;CFqB;OGK;CHE;OIK;CJE"},"hasCjsExports":false},"type":"js/module"}]}