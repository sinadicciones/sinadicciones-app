{"dependencies":[{"name":"@babel/runtime/helpers/objectWithoutPropertiesLoose","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"HFkXuFcBAqfzGtqyPj8g62MKT0M=","exportNames":["*"],"imports":1}},{"name":"@react-navigation/native","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":17,"index":298},"end":{"line":8,"column":52,"index":333}}],"key":"uE+cRVNnMKkS9OYKR5fpRqPul5s=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":16,"index":351},"end":{"line":9,"column":32,"index":367}}],"key":"XN65eZP/QkNMzaBAXbG/zPyidpY=","exportNames":["*"],"imports":1}},{"name":"../../../views/useSafeLayoutEffect","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":30,"index":399},"end":{"line":10,"column":75,"index":444}}],"key":"8jtPDOD8AUcFumcdk1LqFVyAzAc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n  'use client';\n\n  var _objectWithoutPropertiesLoose = require(_dependencyMap[0], \"@babel/runtime/helpers/objectWithoutPropertiesLoose\");\n  function _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\n  function _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.CompositionContext = void 0;\n  exports.registryReducer = registryReducer;\n  exports.useCompositionRegistry = useCompositionRegistry;\n  exports.useCompositionOption = useCompositionOption;\n  const native_1 = require(_dependencyMap[1], \"@react-navigation/native\");\n  const react_1 = require(_dependencyMap[2], \"react\");\n  const useSafeLayoutEffect_1 = require(_dependencyMap[3], \"../../../views/useSafeLayoutEffect\");\n  /** @internal */\n  exports.CompositionContext = (0, react_1.createContext)(null);\n  /** @internal */\n  function registryReducer(state, action) {\n    if (action.type === 'set') {\n      const {\n        routeKey,\n        options\n      } = action;\n      if (state[routeKey]?.includes(options)) {\n        return state;\n      }\n      return Object.assign({}, state, {\n        [routeKey]: [...(state[routeKey] ?? []), options]\n      });\n    }\n    if (action.type === 'unset') {\n      const {\n        routeKey,\n        options\n      } = action;\n      const existing = state[routeKey];\n      const filtered = existing?.filter(o => o !== options);\n      if (!existing || filtered?.length === existing.length) {\n        return state;\n      }\n      if (filtered.length === 0) {\n        const newState = _objectWithoutPropertiesLoose(state, [routeKey].map(_toPropertyKey));\n        return newState;\n      }\n      return Object.assign({}, state, {\n        [routeKey]: filtered\n      });\n    }\n    return state;\n  }\n  /**\n   * Provides the composition registry to descendant composition components.\n   *\n   * Uses useReducer with immutable object updates for React Compiler compatibility.\n   * Each set/unset call produces a new object reference, which the compiler can\n   * track as a reactive dependency.\n   */\n  function useCompositionRegistry() {\n    const [registry, dispatch] = (0, react_1.useReducer)(registryReducer, {});\n    const set = (0, react_1.useCallback)((routeKey, options) => {\n      dispatch({\n        type: 'set',\n        routeKey,\n        options\n      });\n    }, []);\n    const unset = (0, react_1.useCallback)((routeKey, options) => {\n      dispatch({\n        type: 'unset',\n        routeKey,\n        options\n      });\n    }, []);\n    const contextValue = (0, react_1.useMemo)(() => ({\n      set,\n      unset\n    }), [set, unset]);\n    return {\n      registry,\n      contextValue\n    };\n  }\n  /**\n   * Hook used by composition components to register their options in the composition registry.\n   *\n   * Registers options on mount/update via useSafeLayoutEffect, and unregisters on unmount.\n   * Callers should memoize the options object to avoid unnecessary re-registrations.\n   */\n  function useCompositionOption(options) {\n    const context = (0, react_1.use)(exports.CompositionContext);\n    if (!context) {\n      throw new Error('useCompositionOption must be used within a RouterCompositionOptionsProvider. This is likely a bug in Expo Router.');\n    }\n    const route = (0, native_1.useRoute)();\n    const {\n      set,\n      unset\n    } = context;\n    (0, useSafeLayoutEffect_1.useSafeLayoutEffect)(() => {\n      set(route.key, options);\n      return () => {\n        unset(route.key, options);\n      };\n    }, [route.key, set, unset, options]);\n  }\n});","lineCount":109,"map":[[2,2,1,0],[2,14,1,12],[3,2,2,0],[3,14,2,12],[5,2,2,13],[5,6,2,13,"_objectWithoutPropertiesLoose"],[5,35,2,13],[5,38,2,13,"require"],[5,45,2,13],[5,46,2,13,"_dependencyMap"],[5,60,2,13],[6,2,2,13],[6,11,2,13,"_toPropertyKey"],[6,26,2,13,"t"],[6,27,2,13],[6,35,2,13,"i"],[6,36,2,13],[6,39,2,13,"_toPrimitive"],[6,51,2,13],[6,52,2,13,"t"],[6,53,2,13],[6,92,2,13,"i"],[6,93,2,13],[6,96,2,13,"i"],[6,97,2,13],[6,100,2,13,"i"],[6,101,2,13],[7,2,2,13],[7,11,2,13,"_toPrimitive"],[7,24,2,13,"t"],[7,25,2,13],[7,27,2,13,"r"],[7,28,2,13],[7,55,2,13,"t"],[7,56,2,13],[7,61,2,13,"t"],[7,62,2,13],[7,71,2,13,"t"],[7,72,2,13],[7,78,2,13,"e"],[7,79,2,13],[7,82,2,13,"t"],[7,83,2,13],[7,84,2,13,"Symbol"],[7,90,2,13],[7,91,2,13,"toPrimitive"],[7,102,2,13],[7,120,2,13,"e"],[7,121,2,13],[7,129,2,13,"i"],[7,130,2,13],[7,133,2,13,"e"],[7,134,2,13],[7,135,2,13,"call"],[7,139,2,13],[7,140,2,13,"t"],[7,141,2,13],[7,143,2,13,"r"],[7,144,2,13],[7,183,2,13,"i"],[7,184,2,13],[7,193,2,13,"i"],[7,194,2,13],[7,206,2,13,"TypeError"],[7,215,2,13],[7,288,2,13,"r"],[7,289,2,13],[7,292,2,13,"String"],[7,298,2,13],[7,301,2,13,"Number"],[7,307,2,13],[7,309,2,13,"t"],[7,310,2,13],[8,2,3,0,"Object"],[8,8,3,6],[8,9,3,7,"defineProperty"],[8,23,3,21],[8,24,3,22,"exports"],[8,31,3,29],[8,33,3,31],[8,45,3,43],[8,47,3,45],[9,4,3,47,"value"],[9,9,3,52],[9,11,3,54],[10,2,3,59],[10,3,3,60],[10,4,3,61],[11,2,4,0,"exports"],[11,9,4,7],[11,10,4,8,"CompositionContext"],[11,28,4,26],[11,31,4,29],[11,36,4,34],[11,37,4,35],[12,2,5,0,"exports"],[12,9,5,7],[12,10,5,8,"registryReducer"],[12,25,5,23],[12,28,5,26,"registryReducer"],[12,43,5,41],[13,2,6,0,"exports"],[13,9,6,7],[13,10,6,8,"useCompositionRegistry"],[13,32,6,30],[13,35,6,33,"useCompositionRegistry"],[13,57,6,55],[14,2,7,0,"exports"],[14,9,7,7],[14,10,7,8,"useCompositionOption"],[14,30,7,28],[14,33,7,31,"useCompositionOption"],[14,53,7,51],[15,2,8,0],[15,8,8,6,"native_1"],[15,16,8,14],[15,19,8,17,"require"],[15,26,8,24],[15,27,8,24,"_dependencyMap"],[15,41,8,24],[15,72,8,51],[15,73,8,52],[16,2,9,0],[16,8,9,6,"react_1"],[16,15,9,13],[16,18,9,16,"require"],[16,25,9,23],[16,26,9,23,"_dependencyMap"],[16,40,9,23],[16,52,9,31],[16,53,9,32],[17,2,10,0],[17,8,10,6,"useSafeLayoutEffect_1"],[17,29,10,27],[17,32,10,30,"require"],[17,39,10,37],[17,40,10,37,"_dependencyMap"],[17,54,10,37],[17,95,10,74],[17,96,10,75],[18,2,11,0],[19,2,12,0,"exports"],[19,9,12,7],[19,10,12,8,"CompositionContext"],[19,28,12,26],[19,31,12,29],[19,32,12,30],[19,33,12,31],[19,35,12,33,"react_1"],[19,42,12,40],[19,43,12,41,"createContext"],[19,56,12,54],[19,58,12,56],[19,62,12,60],[19,63,12,61],[20,2,13,0],[21,2,14,0],[21,11,14,9,"registryReducer"],[21,26,14,24,"registryReducer"],[21,27,14,25,"state"],[21,32,14,30],[21,34,14,32,"action"],[21,40,14,38],[21,42,14,40],[22,4,15,4],[22,8,15,8,"action"],[22,14,15,14],[22,15,15,15,"type"],[22,19,15,19],[22,24,15,24],[22,29,15,29],[22,31,15,31],[23,6,16,8],[23,12,16,14],[24,8,16,16,"routeKey"],[24,16,16,24],[25,8,16,26,"options"],[26,6,16,34],[26,7,16,35],[26,10,16,38,"action"],[26,16,16,44],[27,6,17,8],[27,10,17,12,"state"],[27,15,17,17],[27,16,17,18,"routeKey"],[27,24,17,26],[27,25,17,27],[27,27,17,29,"includes"],[27,35,17,37],[27,36,17,38,"options"],[27,43,17,45],[27,44,17,46],[27,46,17,48],[28,8,18,12],[28,15,18,19,"state"],[28,20,18,24],[29,6,19,8],[30,6,20,8],[30,13,20,8,"Object"],[30,19,20,8],[30,20,20,8,"assign"],[30,26,20,8],[30,31,20,20,"state"],[30,36,20,25],[31,8,20,27],[31,9,20,28,"routeKey"],[31,17,20,36],[31,20,20,39],[31,21,20,40],[31,25,20,44,"state"],[31,30,20,49],[31,31,20,50,"routeKey"],[31,39,20,58],[31,40,20,59],[31,44,20,63],[31,46,20,65],[31,47,20,66],[31,49,20,68,"options"],[31,56,20,75],[32,6,20,76],[33,4,21,4],[34,4,22,4],[34,8,22,8,"action"],[34,14,22,14],[34,15,22,15,"type"],[34,19,22,19],[34,24,22,24],[34,31,22,31],[34,33,22,33],[35,6,23,8],[35,12,23,14],[36,8,23,16,"routeKey"],[36,16,23,24],[37,8,23,26,"options"],[38,6,23,34],[38,7,23,35],[38,10,23,38,"action"],[38,16,23,44],[39,6,24,8],[39,12,24,14,"existing"],[39,20,24,22],[39,23,24,25,"state"],[39,28,24,30],[39,29,24,31,"routeKey"],[39,37,24,39],[39,38,24,40],[40,6,25,8],[40,12,25,14,"filtered"],[40,20,25,22],[40,23,25,25,"existing"],[40,31,25,33],[40,33,25,35,"filter"],[40,39,25,41],[40,40,25,43,"o"],[40,41,25,44],[40,45,25,49,"o"],[40,46,25,50],[40,51,25,55,"options"],[40,58,25,62],[40,59,25,63],[41,6,26,8],[41,10,26,12],[41,11,26,13,"existing"],[41,19,26,21],[41,23,26,25,"filtered"],[41,31,26,33],[41,33,26,35,"length"],[41,39,26,41],[41,44,26,46,"existing"],[41,52,26,54],[41,53,26,55,"length"],[41,59,26,61],[41,61,26,63],[42,8,27,12],[42,15,27,19,"state"],[42,20,27,24],[43,6,28,8],[44,6,29,8],[44,10,29,12,"filtered"],[44,18,29,20],[44,19,29,21,"length"],[44,25,29,27],[44,30,29,32],[44,31,29,33],[44,33,29,35],[45,8,30,12],[45,14,30,38,"newState"],[45,22,30,46],[45,25,30,46,"_objectWithoutPropertiesLoose"],[45,54,30,46],[45,55,30,51,"state"],[45,60,30,56],[45,63,30,21,"routeKey"],[45,71,30,29],[45,73,30,29,"map"],[45,76,30,29],[45,77,30,29,"_toPropertyKey"],[45,91,30,29],[46,8,31,12],[46,15,31,19,"newState"],[46,23,31,27],[47,6,32,8],[48,6,33,8],[48,13,33,8,"Object"],[48,19,33,8],[48,20,33,8,"assign"],[48,26,33,8],[48,31,33,20,"state"],[48,36,33,25],[49,8,33,27],[49,9,33,28,"routeKey"],[49,17,33,36],[49,20,33,39,"filtered"],[50,6,33,47],[51,4,34,4],[52,4,35,4],[52,11,35,11,"state"],[52,16,35,16],[53,2,36,0],[54,2,37,0],[55,0,38,0],[56,0,39,0],[57,0,40,0],[58,0,41,0],[59,0,42,0],[60,0,43,0],[61,2,44,0],[61,11,44,9,"useCompositionRegistry"],[61,33,44,31,"useCompositionRegistry"],[61,34,44,31],[61,36,44,34],[62,4,45,4],[62,10,45,10],[62,11,45,11,"registry"],[62,19,45,19],[62,21,45,21,"dispatch"],[62,29,45,29],[62,30,45,30],[62,33,45,33],[62,34,45,34],[62,35,45,35],[62,37,45,37,"react_1"],[62,44,45,44],[62,45,45,45,"useReducer"],[62,55,45,55],[62,57,45,57,"registryReducer"],[62,72,45,72],[62,74,45,74],[62,75,45,75],[62,76,45,76],[62,77,45,77],[63,4,46,4],[63,10,46,10,"set"],[63,13,46,13],[63,16,46,16],[63,17,46,17],[63,18,46,18],[63,20,46,20,"react_1"],[63,27,46,27],[63,28,46,28,"useCallback"],[63,39,46,39],[63,41,46,41],[63,42,46,42,"routeKey"],[63,50,46,50],[63,52,46,52,"options"],[63,59,46,59],[63,64,46,64],[64,6,47,8,"dispatch"],[64,14,47,16],[64,15,47,17],[65,8,47,19,"type"],[65,12,47,23],[65,14,47,25],[65,19,47,30],[66,8,47,32,"routeKey"],[66,16,47,40],[67,8,47,42,"options"],[68,6,47,50],[68,7,47,51],[68,8,47,52],[69,4,48,4],[69,5,48,5],[69,7,48,7],[69,9,48,9],[69,10,48,10],[70,4,49,4],[70,10,49,10,"unset"],[70,15,49,15],[70,18,49,18],[70,19,49,19],[70,20,49,20],[70,22,49,22,"react_1"],[70,29,49,29],[70,30,49,30,"useCallback"],[70,41,49,41],[70,43,49,43],[70,44,49,44,"routeKey"],[70,52,49,52],[70,54,49,54,"options"],[70,61,49,61],[70,66,49,66],[71,6,50,8,"dispatch"],[71,14,50,16],[71,15,50,17],[72,8,50,19,"type"],[72,12,50,23],[72,14,50,25],[72,21,50,32],[73,8,50,34,"routeKey"],[73,16,50,42],[74,8,50,44,"options"],[75,6,50,52],[75,7,50,53],[75,8,50,54],[76,4,51,4],[76,5,51,5],[76,7,51,7],[76,9,51,9],[76,10,51,10],[77,4,52,4],[77,10,52,10,"contextValue"],[77,22,52,22],[77,25,52,25],[77,26,52,26],[77,27,52,27],[77,29,52,29,"react_1"],[77,36,52,36],[77,37,52,37,"useMemo"],[77,44,52,44],[77,46,52,46],[77,53,52,53],[78,6,52,55,"set"],[78,9,52,58],[79,6,52,60,"unset"],[80,4,52,66],[80,5,52,67],[80,6,52,68],[80,8,52,70],[80,9,52,71,"set"],[80,12,52,74],[80,14,52,76,"unset"],[80,19,52,81],[80,20,52,82],[80,21,52,83],[81,4,53,4],[81,11,53,11],[82,6,53,13,"registry"],[82,14,53,21],[83,6,53,23,"contextValue"],[84,4,53,36],[84,5,53,37],[85,2,54,0],[86,2,55,0],[87,0,56,0],[88,0,57,0],[89,0,58,0],[90,0,59,0],[91,0,60,0],[92,2,61,0],[92,11,61,9,"useCompositionOption"],[92,31,61,29,"useCompositionOption"],[92,32,61,30,"options"],[92,39,61,37],[92,41,61,39],[93,4,62,4],[93,10,62,10,"context"],[93,17,62,17],[93,20,62,20],[93,21,62,21],[93,22,62,22],[93,24,62,24,"react_1"],[93,31,62,31],[93,32,62,32,"use"],[93,35,62,35],[93,37,62,37,"exports"],[93,44,62,44],[93,45,62,45,"CompositionContext"],[93,63,62,63],[93,64,62,64],[94,4,63,4],[94,8,63,8],[94,9,63,9,"context"],[94,16,63,16],[94,18,63,18],[95,6,64,8],[95,12,64,14],[95,16,64,18,"Error"],[95,21,64,23],[95,22,64,24],[95,137,64,139],[95,138,64,140],[96,4,65,4],[97,4,66,4],[97,10,66,10,"route"],[97,15,66,15],[97,18,66,18],[97,19,66,19],[97,20,66,20],[97,22,66,22,"native_1"],[97,30,66,30],[97,31,66,31,"useRoute"],[97,39,66,39],[97,41,66,41],[97,42,66,42],[98,4,67,4],[98,10,67,10],[99,6,67,12,"set"],[99,9,67,15],[100,6,67,17,"unset"],[101,4,67,23],[101,5,67,24],[101,8,67,27,"context"],[101,15,67,34],[102,4,68,4],[102,5,68,5],[102,6,68,6],[102,8,68,8,"useSafeLayoutEffect_1"],[102,29,68,29],[102,30,68,30,"useSafeLayoutEffect"],[102,49,68,49],[102,51,68,51],[102,57,68,57],[103,6,69,8,"set"],[103,9,69,11],[103,10,69,12,"route"],[103,15,69,17],[103,16,69,18,"key"],[103,19,69,21],[103,21,69,23,"options"],[103,28,69,30],[103,29,69,31],[104,6,70,8],[104,13,70,15],[104,19,70,21],[105,8,71,12,"unset"],[105,13,71,17],[105,14,71,18,"route"],[105,19,71,23],[105,20,71,24,"key"],[105,23,71,27],[105,25,71,29,"options"],[105,32,71,36],[105,33,71,37],[106,6,72,8],[106,7,72,9],[107,4,73,4],[107,5,73,5],[107,7,73,7],[107,8,73,8,"route"],[107,13,73,13],[107,14,73,14,"key"],[107,17,73,17],[107,19,73,19,"set"],[107,22,73,22],[107,24,73,24,"unset"],[107,29,73,29],[107,31,73,31,"options"],[107,38,73,38],[107,39,73,39],[107,40,73,40],[108,2,74,0],[109,0,74,1],[109,3]],"functionMap":{"names":["<global>","registryReducer","existing.filter$argument_0","useCompositionRegistry","<anonymous>","useCompositionOption"],"mappings":"AAA;ACa;0CCW,oBD;CDW;AGQ;yCCE;KDE;2CCC;KDE;8CCC,sBD;CHE;AKO;mDDO;KCK;CLC"},"hasCjsExports":true},"type":"js/module"}]}