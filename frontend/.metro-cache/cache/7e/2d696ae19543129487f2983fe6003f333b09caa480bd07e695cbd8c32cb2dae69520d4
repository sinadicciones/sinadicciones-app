{"dependencies":[{"name":"@react-navigation/native","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":17,"index":298},"end":{"line":8,"column":52,"index":333}}],"key":"uE+cRVNnMKkS9OYKR5fpRqPul5s=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":16,"index":351},"end":{"line":9,"column":32,"index":367}}],"key":"XN65eZP/QkNMzaBAXbG/zPyidpY=","exportNames":["*"],"imports":1}},{"name":"../../../views/useSafeLayoutEffect","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":30,"index":399},"end":{"line":10,"column":75,"index":444}}],"key":"8jtPDOD8AUcFumcdk1LqFVyAzAc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n  'use client';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.CompositionContext = void 0;\n  exports.registryReducer = registryReducer;\n  exports.useCompositionRegistry = useCompositionRegistry;\n  exports.useCompositionOption = useCompositionOption;\n  const native_1 = require(_dependencyMap[0], \"@react-navigation/native\");\n  const react_1 = require(_dependencyMap[1], \"react\");\n  const useSafeLayoutEffect_1 = require(_dependencyMap[2], \"../../../views/useSafeLayoutEffect\");\n  /** @internal */\n  exports.CompositionContext = (0, react_1.createContext)(null);\n  /** @internal */\n  function registryReducer(state, action) {\n    if (action.type === 'set') {\n      const {\n        routeKey,\n        options\n      } = action;\n      if (state[routeKey]?.includes(options)) {\n        return state;\n      }\n      return {\n        ...state,\n        [routeKey]: [...(state[routeKey] ?? []), options]\n      };\n    }\n    if (action.type === 'unset') {\n      const {\n        routeKey,\n        options\n      } = action;\n      const existing = state[routeKey];\n      const filtered = existing?.filter(o => o !== options);\n      if (!existing || filtered?.length === existing.length) {\n        return state;\n      }\n      if (filtered.length === 0) {\n        const {\n          [routeKey]: _,\n          ...newState\n        } = state;\n        return newState;\n      }\n      return {\n        ...state,\n        [routeKey]: filtered\n      };\n    }\n    return state;\n  }\n  /**\n   * Provides the composition registry to descendant composition components.\n   *\n   * Uses useReducer with immutable object updates for React Compiler compatibility.\n   * Each set/unset call produces a new object reference, which the compiler can\n   * track as a reactive dependency.\n   */\n  function useCompositionRegistry() {\n    const [registry, dispatch] = (0, react_1.useReducer)(registryReducer, {});\n    const set = (0, react_1.useCallback)((routeKey, options) => {\n      dispatch({\n        type: 'set',\n        routeKey,\n        options\n      });\n    }, []);\n    const unset = (0, react_1.useCallback)((routeKey, options) => {\n      dispatch({\n        type: 'unset',\n        routeKey,\n        options\n      });\n    }, []);\n    const contextValue = (0, react_1.useMemo)(() => ({\n      set,\n      unset\n    }), [set, unset]);\n    return {\n      registry,\n      contextValue\n    };\n  }\n  /**\n   * Hook used by composition components to register their options in the composition registry.\n   *\n   * Registers options on mount/update via useSafeLayoutEffect, and unregisters on unmount.\n   * Callers should memoize the options object to avoid unnecessary re-registrations.\n   */\n  function useCompositionOption(options) {\n    const context = (0, react_1.use)(exports.CompositionContext);\n    if (!context) {\n      throw new Error('useCompositionOption must be used within a RouterCompositionOptionsProvider. This is likely a bug in Expo Router.');\n    }\n    const route = (0, native_1.useRoute)();\n    const {\n      set,\n      unset\n    } = context;\n    (0, useSafeLayoutEffect_1.useSafeLayoutEffect)(() => {\n      set(route.key, options);\n      return () => {\n        unset(route.key, options);\n      };\n    }, [route.key, set, unset, options]);\n  }\n});","lineCount":111,"map":[[2,2,1,0],[2,14,1,12],[3,2,2,0],[3,14,2,12],[5,2,3,0,"Object"],[5,8,3,6],[5,9,3,7,"defineProperty"],[5,23,3,21],[5,24,3,22,"exports"],[5,31,3,29],[5,33,3,31],[5,45,3,43],[5,47,3,45],[6,4,3,47,"value"],[6,9,3,52],[6,11,3,54],[7,2,3,59],[7,3,3,60],[7,4,3,61],[8,2,4,0,"exports"],[8,9,4,7],[8,10,4,8,"CompositionContext"],[8,28,4,26],[8,31,4,29],[8,36,4,34],[8,37,4,35],[9,2,5,0,"exports"],[9,9,5,7],[9,10,5,8,"registryReducer"],[9,25,5,23],[9,28,5,26,"registryReducer"],[9,43,5,41],[10,2,6,0,"exports"],[10,9,6,7],[10,10,6,8,"useCompositionRegistry"],[10,32,6,30],[10,35,6,33,"useCompositionRegistry"],[10,57,6,55],[11,2,7,0,"exports"],[11,9,7,7],[11,10,7,8,"useCompositionOption"],[11,30,7,28],[11,33,7,31,"useCompositionOption"],[11,53,7,51],[12,2,8,0],[12,8,8,6,"native_1"],[12,16,8,14],[12,19,8,17,"require"],[12,26,8,24],[12,27,8,24,"_dependencyMap"],[12,41,8,24],[12,72,8,51],[12,73,8,52],[13,2,9,0],[13,8,9,6,"react_1"],[13,15,9,13],[13,18,9,16,"require"],[13,25,9,23],[13,26,9,23,"_dependencyMap"],[13,40,9,23],[13,52,9,31],[13,53,9,32],[14,2,10,0],[14,8,10,6,"useSafeLayoutEffect_1"],[14,29,10,27],[14,32,10,30,"require"],[14,39,10,37],[14,40,10,37,"_dependencyMap"],[14,54,10,37],[14,95,10,74],[14,96,10,75],[15,2,11,0],[16,2,12,0,"exports"],[16,9,12,7],[16,10,12,8,"CompositionContext"],[16,28,12,26],[16,31,12,29],[16,32,12,30],[16,33,12,31],[16,35,12,33,"react_1"],[16,42,12,40],[16,43,12,41,"createContext"],[16,56,12,54],[16,58,12,56],[16,62,12,60],[16,63,12,61],[17,2,13,0],[18,2,14,0],[18,11,14,9,"registryReducer"],[18,26,14,24,"registryReducer"],[18,27,14,25,"state"],[18,32,14,30],[18,34,14,32,"action"],[18,40,14,38],[18,42,14,40],[19,4,15,4],[19,8,15,8,"action"],[19,14,15,14],[19,15,15,15,"type"],[19,19,15,19],[19,24,15,24],[19,29,15,29],[19,31,15,31],[20,6,16,8],[20,12,16,14],[21,8,16,16,"routeKey"],[21,16,16,24],[22,8,16,26,"options"],[23,6,16,34],[23,7,16,35],[23,10,16,38,"action"],[23,16,16,44],[24,6,17,8],[24,10,17,12,"state"],[24,15,17,17],[24,16,17,18,"routeKey"],[24,24,17,26],[24,25,17,27],[24,27,17,29,"includes"],[24,35,17,37],[24,36,17,38,"options"],[24,43,17,45],[24,44,17,46],[24,46,17,48],[25,8,18,12],[25,15,18,19,"state"],[25,20,18,24],[26,6,19,8],[27,6,20,8],[27,13,20,15],[28,8,20,17],[28,11,20,20,"state"],[28,16,20,25],[29,8,20,27],[29,9,20,28,"routeKey"],[29,17,20,36],[29,20,20,39],[29,21,20,40],[29,25,20,44,"state"],[29,30,20,49],[29,31,20,50,"routeKey"],[29,39,20,58],[29,40,20,59],[29,44,20,63],[29,46,20,65],[29,47,20,66],[29,49,20,68,"options"],[29,56,20,75],[30,6,20,77],[30,7,20,78],[31,4,21,4],[32,4,22,4],[32,8,22,8,"action"],[32,14,22,14],[32,15,22,15,"type"],[32,19,22,19],[32,24,22,24],[32,31,22,31],[32,33,22,33],[33,6,23,8],[33,12,23,14],[34,8,23,16,"routeKey"],[34,16,23,24],[35,8,23,26,"options"],[36,6,23,34],[36,7,23,35],[36,10,23,38,"action"],[36,16,23,44],[37,6,24,8],[37,12,24,14,"existing"],[37,20,24,22],[37,23,24,25,"state"],[37,28,24,30],[37,29,24,31,"routeKey"],[37,37,24,39],[37,38,24,40],[38,6,25,8],[38,12,25,14,"filtered"],[38,20,25,22],[38,23,25,25,"existing"],[38,31,25,33],[38,33,25,35,"filter"],[38,39,25,41],[38,40,25,43,"o"],[38,41,25,44],[38,45,25,49,"o"],[38,46,25,50],[38,51,25,55,"options"],[38,58,25,62],[38,59,25,63],[39,6,26,8],[39,10,26,12],[39,11,26,13,"existing"],[39,19,26,21],[39,23,26,25,"filtered"],[39,31,26,33],[39,33,26,35,"length"],[39,39,26,41],[39,44,26,46,"existing"],[39,52,26,54],[39,53,26,55,"length"],[39,59,26,61],[39,61,26,63],[40,8,27,12],[40,15,27,19,"state"],[40,20,27,24],[41,6,28,8],[42,6,29,8],[42,10,29,12,"filtered"],[42,18,29,20],[42,19,29,21,"length"],[42,25,29,27],[42,30,29,32],[42,31,29,33],[42,33,29,35],[43,8,30,12],[43,14,30,18],[44,10,30,20],[44,11,30,21,"routeKey"],[44,19,30,29],[44,22,30,32,"_"],[44,23,30,33],[45,10,30,35],[45,13,30,38,"newState"],[46,8,30,47],[46,9,30,48],[46,12,30,51,"state"],[46,17,30,56],[47,8,31,12],[47,15,31,19,"newState"],[47,23,31,27],[48,6,32,8],[49,6,33,8],[49,13,33,15],[50,8,33,17],[50,11,33,20,"state"],[50,16,33,25],[51,8,33,27],[51,9,33,28,"routeKey"],[51,17,33,36],[51,20,33,39,"filtered"],[52,6,33,48],[52,7,33,49],[53,4,34,4],[54,4,35,4],[54,11,35,11,"state"],[54,16,35,16],[55,2,36,0],[56,2,37,0],[57,0,38,0],[58,0,39,0],[59,0,40,0],[60,0,41,0],[61,0,42,0],[62,0,43,0],[63,2,44,0],[63,11,44,9,"useCompositionRegistry"],[63,33,44,31,"useCompositionRegistry"],[63,34,44,31],[63,36,44,34],[64,4,45,4],[64,10,45,10],[64,11,45,11,"registry"],[64,19,45,19],[64,21,45,21,"dispatch"],[64,29,45,29],[64,30,45,30],[64,33,45,33],[64,34,45,34],[64,35,45,35],[64,37,45,37,"react_1"],[64,44,45,44],[64,45,45,45,"useReducer"],[64,55,45,55],[64,57,45,57,"registryReducer"],[64,72,45,72],[64,74,45,74],[64,75,45,75],[64,76,45,76],[64,77,45,77],[65,4,46,4],[65,10,46,10,"set"],[65,13,46,13],[65,16,46,16],[65,17,46,17],[65,18,46,18],[65,20,46,20,"react_1"],[65,27,46,27],[65,28,46,28,"useCallback"],[65,39,46,39],[65,41,46,41],[65,42,46,42,"routeKey"],[65,50,46,50],[65,52,46,52,"options"],[65,59,46,59],[65,64,46,64],[66,6,47,8,"dispatch"],[66,14,47,16],[66,15,47,17],[67,8,47,19,"type"],[67,12,47,23],[67,14,47,25],[67,19,47,30],[68,8,47,32,"routeKey"],[68,16,47,40],[69,8,47,42,"options"],[70,6,47,50],[70,7,47,51],[70,8,47,52],[71,4,48,4],[71,5,48,5],[71,7,48,7],[71,9,48,9],[71,10,48,10],[72,4,49,4],[72,10,49,10,"unset"],[72,15,49,15],[72,18,49,18],[72,19,49,19],[72,20,49,20],[72,22,49,22,"react_1"],[72,29,49,29],[72,30,49,30,"useCallback"],[72,41,49,41],[72,43,49,43],[72,44,49,44,"routeKey"],[72,52,49,52],[72,54,49,54,"options"],[72,61,49,61],[72,66,49,66],[73,6,50,8,"dispatch"],[73,14,50,16],[73,15,50,17],[74,8,50,19,"type"],[74,12,50,23],[74,14,50,25],[74,21,50,32],[75,8,50,34,"routeKey"],[75,16,50,42],[76,8,50,44,"options"],[77,6,50,52],[77,7,50,53],[77,8,50,54],[78,4,51,4],[78,5,51,5],[78,7,51,7],[78,9,51,9],[78,10,51,10],[79,4,52,4],[79,10,52,10,"contextValue"],[79,22,52,22],[79,25,52,25],[79,26,52,26],[79,27,52,27],[79,29,52,29,"react_1"],[79,36,52,36],[79,37,52,37,"useMemo"],[79,44,52,44],[79,46,52,46],[79,53,52,53],[80,6,52,55,"set"],[80,9,52,58],[81,6,52,60,"unset"],[82,4,52,66],[82,5,52,67],[82,6,52,68],[82,8,52,70],[82,9,52,71,"set"],[82,12,52,74],[82,14,52,76,"unset"],[82,19,52,81],[82,20,52,82],[82,21,52,83],[83,4,53,4],[83,11,53,11],[84,6,53,13,"registry"],[84,14,53,21],[85,6,53,23,"contextValue"],[86,4,53,36],[86,5,53,37],[87,2,54,0],[88,2,55,0],[89,0,56,0],[90,0,57,0],[91,0,58,0],[92,0,59,0],[93,0,60,0],[94,2,61,0],[94,11,61,9,"useCompositionOption"],[94,31,61,29,"useCompositionOption"],[94,32,61,30,"options"],[94,39,61,37],[94,41,61,39],[95,4,62,4],[95,10,62,10,"context"],[95,17,62,17],[95,20,62,20],[95,21,62,21],[95,22,62,22],[95,24,62,24,"react_1"],[95,31,62,31],[95,32,62,32,"use"],[95,35,62,35],[95,37,62,37,"exports"],[95,44,62,44],[95,45,62,45,"CompositionContext"],[95,63,62,63],[95,64,62,64],[96,4,63,4],[96,8,63,8],[96,9,63,9,"context"],[96,16,63,16],[96,18,63,18],[97,6,64,8],[97,12,64,14],[97,16,64,18,"Error"],[97,21,64,23],[97,22,64,24],[97,137,64,139],[97,138,64,140],[98,4,65,4],[99,4,66,4],[99,10,66,10,"route"],[99,15,66,15],[99,18,66,18],[99,19,66,19],[99,20,66,20],[99,22,66,22,"native_1"],[99,30,66,30],[99,31,66,31,"useRoute"],[99,39,66,39],[99,41,66,41],[99,42,66,42],[100,4,67,4],[100,10,67,10],[101,6,67,12,"set"],[101,9,67,15],[102,6,67,17,"unset"],[103,4,67,23],[103,5,67,24],[103,8,67,27,"context"],[103,15,67,34],[104,4,68,4],[104,5,68,5],[104,6,68,6],[104,8,68,8,"useSafeLayoutEffect_1"],[104,29,68,29],[104,30,68,30,"useSafeLayoutEffect"],[104,49,68,49],[104,51,68,51],[104,57,68,57],[105,6,69,8,"set"],[105,9,69,11],[105,10,69,12,"route"],[105,15,69,17],[105,16,69,18,"key"],[105,19,69,21],[105,21,69,23,"options"],[105,28,69,30],[105,29,69,31],[106,6,70,8],[106,13,70,15],[106,19,70,21],[107,8,71,12,"unset"],[107,13,71,17],[107,14,71,18,"route"],[107,19,71,23],[107,20,71,24,"key"],[107,23,71,27],[107,25,71,29,"options"],[107,32,71,36],[107,33,71,37],[108,6,72,8],[108,7,72,9],[109,4,73,4],[109,5,73,5],[109,7,73,7],[109,8,73,8,"route"],[109,13,73,13],[109,14,73,14,"key"],[109,17,73,17],[109,19,73,19,"set"],[109,22,73,22],[109,24,73,24,"unset"],[109,29,73,29],[109,31,73,31,"options"],[109,38,73,38],[109,39,73,39],[109,40,73,40],[110,2,74,0],[111,0,74,1],[111,3]],"functionMap":{"names":["<global>","registryReducer","existing.filter$argument_0","useCompositionRegistry","<anonymous>","useCompositionOption"],"mappings":"AAA;ACa;0CCW,oBD;CDW;AGQ;yCCE;KDE;2CCC;KDE;8CCC,sBD;CHE;AKO;mDDO;KCK;CLC"},"hasCjsExports":true},"type":"js/module"}]}