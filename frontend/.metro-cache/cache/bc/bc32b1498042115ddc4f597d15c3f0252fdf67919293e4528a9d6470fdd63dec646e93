{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":69,"index":69}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.authenticatedFetch = authenticatedFetch;\n  exports.getBackendURL = getBackendURL;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[2], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  const BACKEND_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || 'https://sober-tracks.preview.emergentagent.com';\n  // Helper to get token from storage (works on both web and mobile)\n  const getToken = async () => {\n    if (Platform.default.OS === 'web' && typeof window !== 'undefined') {\n      return localStorage.getItem('session_token');\n    }\n    return await AsyncStorage.default.getItem('session_token');\n  };\n\n  /**\n   * Helper function to make authenticated API requests\n   * Uses Authorization header with token from storage\n   */\n  async function authenticatedFetch(url, options = {}) {\n    const headers = {\n      'Content-Type': 'application/json',\n      ...options.headers\n    };\n\n    // Add Authorization header with token from storage\n    const token = await getToken();\n    if (token) {\n      headers['Authorization'] = `Bearer ${token}`;\n    }\n\n    // Make the request\n    return fetch(url, {\n      ...options,\n      headers,\n      credentials: 'include'\n    });\n  }\n\n  /**\n   * Get the backend URL\n   */\n  function getBackendURL() {\n    return BACKEND_URL;\n  }\n});","lineCount":58,"map":[[12,2,22,0,"exports"],[12,9,22,0],[12,10,22,0,"authenticatedFetch"],[12,28,22,0],[12,31,22,0,"authenticatedFetch"],[12,49,22,0],[13,2,45,0,"exports"],[13,9,45,0],[13,10,45,0,"getBackendURL"],[13,23,45,0],[13,26,45,0,"getBackendURL"],[13,39,45,0],[14,2,47,1],[14,6,47,1,"_expoVirtualEnv"],[14,21,47,1],[14,24,47,1,"require"],[14,31,47,1],[14,32,47,1,"_dependencyMap"],[14,46,47,1],[15,2,1,0],[15,6,1,0,"_reactNativeAsyncStorageAsyncStorage"],[15,42,1,0],[15,45,1,0,"require"],[15,52,1,0],[15,53,1,0,"_dependencyMap"],[15,67,1,0],[16,2,1,0],[16,6,1,0,"AsyncStorage"],[16,18,1,0],[16,21,1,0,"_interopDefault"],[16,36,1,0],[16,37,1,0,"_reactNativeAsyncStorageAsyncStorage"],[16,73,1,0],[17,2,1,69],[17,6,1,69,"_reactNativeWebDistExportsPlatform"],[17,40,1,69],[17,43,1,69,"require"],[17,50,1,69],[17,51,1,69,"_dependencyMap"],[17,65,1,69],[18,2,1,69],[18,6,1,69,"Platform"],[18,14,1,69],[18,17,1,69,"_interopDefault"],[18,32,1,69],[18,33,1,69,"_reactNativeWebDistExportsPlatform"],[18,67,1,69],[19,2,4,0],[19,8,4,6,"BACKEND_URL"],[19,19,4,17],[19,22,4,20,"_expoVirtualEnv"],[19,37,4,20],[19,38,4,20,"env"],[19,41,4,20],[19,42,4,20,"EXPO_PUBLIC_BACKEND_URL"],[19,65,4,20],[19,69,4,59],[19,117,4,107],[20,2,10,0],[21,2,11,0],[21,8,11,6,"getToken"],[21,16,11,14],[21,19,11,17],[21,25,11,17,"getToken"],[21,26,11,17],[21,31,11,53],[22,4,12,2],[22,8,12,6,"Platform"],[22,16,12,14],[22,17,12,14,"default"],[22,24,12,14],[22,25,12,15,"OS"],[22,27,12,17],[22,32,12,22],[22,37,12,27],[22,41,12,31],[22,48,12,38,"window"],[22,54,12,44],[22,59,12,49],[22,70,12,60],[22,72,12,62],[23,6,13,4],[23,13,13,11,"localStorage"],[23,25,13,23],[23,26,13,24,"getItem"],[23,33,13,31],[23,34,13,32],[23,49,13,47],[23,50,13,48],[24,4,14,2],[25,4,15,2],[25,11,15,9],[25,17,15,15,"AsyncStorage"],[25,29,15,27],[25,30,15,27,"default"],[25,37,15,27],[25,38,15,28,"getItem"],[25,45,15,35],[25,46,15,36],[25,61,15,51],[25,62,15,52],[26,2,16,0],[26,3,16,1],[28,2,18,0],[29,0,19,0],[30,0,20,0],[31,0,21,0],[32,2,22,7],[32,17,22,22,"authenticatedFetch"],[32,35,22,40,"authenticatedFetch"],[32,36,22,41,"url"],[32,39,22,52],[32,41,22,54,"options"],[32,48,22,75],[32,51,22,78],[32,52,22,79],[32,53,22,80],[32,55,22,101],[33,4,23,2],[33,10,23,8,"headers"],[33,17,23,39],[33,20,23,42],[34,6,24,4],[34,20,24,18],[34,22,24,20],[34,40,24,38],[35,6,25,4],[35,9,25,7,"options"],[35,16,25,14],[35,17,25,15,"headers"],[36,4,26,2],[36,5,26,3],[38,4,28,2],[39,4,29,2],[39,10,29,8,"token"],[39,15,29,13],[39,18,29,16],[39,24,29,22,"getToken"],[39,32,29,30],[39,33,29,31],[39,34,29,32],[40,4,30,2],[40,8,30,6,"token"],[40,13,30,11],[40,15,30,13],[41,6,31,4,"headers"],[41,13,31,11],[41,14,31,12],[41,29,31,27],[41,30,31,28],[41,33,31,31],[41,43,31,41,"token"],[41,48,31,46],[41,50,31,48],[42,4,32,2],[44,4,34,2],[45,4,35,2],[45,11,35,9,"fetch"],[45,16,35,14],[45,17,35,15,"url"],[45,20,35,18],[45,22,35,20],[46,6,36,4],[46,9,36,7,"options"],[46,16,36,14],[47,6,37,4,"headers"],[47,13,37,11],[48,6,38,4,"credentials"],[48,17,38,15],[48,19,38,17],[49,4,39,2],[49,5,39,3],[49,6,39,4],[50,2,40,0],[52,2,42,0],[53,0,43,0],[54,0,44,0],[55,2,45,7],[55,11,45,16,"getBackendURL"],[55,24,45,29,"getBackendURL"],[55,25,45,29],[55,27,45,40],[56,4,46,2],[56,11,46,9,"BACKEND_URL"],[56,22,46,20],[57,2,47,0],[58,0,47,1],[58,3]],"functionMap":{"names":["<global>","getToken","authenticatedFetch","getBackendURL"],"mappings":"AAA;iBCU;CDK;OEM;CFkB;OGK;CHE"},"hasCjsExports":false},"type":"js/module"}]}