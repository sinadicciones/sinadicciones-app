{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":67,"index":82}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use client';\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.useReleasingSharedObject = useReleasingSharedObject;\n  var _react = require(_dependencyMap[0], \"react\");\n  /**\n   * Returns a shared object, which is automatically cleaned up when the component is unmounted.\n   */\n  function useReleasingSharedObject(factory, dependencies) {\n    const objectRef = (0, _react.useRef)(null);\n    const objectRefToRelease = (0, _react.useRef)(null);\n    const isFastRefresh = (0, _react.useRef)(false);\n    const previousDependencies = (0, _react.useRef)(dependencies);\n    if (objectRef.current == null) {\n      objectRef.current = factory();\n    }\n    const object = (0, _react.useMemo)(() => {\n      let newObject = objectRef.current;\n      const dependenciesAreEqual = previousDependencies.current?.length === dependencies.length && dependencies.every((value, index) => value === previousDependencies.current[index]);\n\n      // If the dependencies have changed, schedule the previous object for release and create a new one,\n      // otherwise this has been called because of an unrelated fast refresh, and we don't want to release the object.\n      if (!newObject || !dependenciesAreEqual) {\n        objectRefToRelease.current = objectRef.current;\n        newObject = factory();\n        objectRef.current = newObject;\n        previousDependencies.current = dependencies;\n      }\n      return newObject;\n    }, dependencies);\n    (0, _react.useEffect)(() => {\n      // When the object changes, release the previous one - it is important to do this in a useEffect, so that we don't release\n      // the object during render.\n      if (objectRefToRelease.current) {\n        objectRefToRelease.current.release();\n        objectRefToRelease.current = null;\n      }\n    }, [object]);\n    (0, _react.useMemo)(() => {\n      isFastRefresh.current = true;\n    }, []);\n    (0, _react.useEffect)(() => {\n      isFastRefresh.current = false;\n      return () => {\n        // This will be called on every fast refresh and on unmount, but we only want to release the object on unmount.\n        if (!isFastRefresh.current && objectRef.current) {\n          objectRef.current.release();\n        }\n      };\n    }, []);\n    return object;\n  }\n});","lineCount":57,"map":[[2,2,1,0],[2,14,1,12],[3,2,1,13],[5,2,1,13,"Object"],[5,8,1,13],[5,9,1,13,"defineProperty"],[5,23,1,13],[5,24,1,13,"exports"],[5,31,1,13],[6,4,1,13,"value"],[6,9,1,13],[7,2,1,13],[8,2,10,0,"exports"],[8,9,10,0],[8,10,10,0,"useReleasingSharedObject"],[8,34,10,0],[8,37,10,0,"useReleasingSharedObject"],[8,61,10,0],[9,2,3,0],[9,6,3,0,"_react"],[9,12,3,0],[9,15,3,0,"require"],[9,22,3,0],[9,23,3,0,"_dependencyMap"],[9,37,3,0],[10,2,7,0],[11,0,8,0],[12,0,9,0],[13,2,10,7],[13,11,10,16,"useReleasingSharedObject"],[13,35,10,40,"useReleasingSharedObject"],[13,36,11,2,"factory"],[13,43,11,30],[13,45,12,2,"dependencies"],[13,57,12,30],[13,59,13,17],[14,4,14,2],[14,10,14,8,"objectRef"],[14,19,14,17],[14,22,14,20],[14,26,14,20,"useRef"],[14,32,14,26],[14,33,14,26,"useRef"],[14,39,14,26],[14,41,14,49],[14,45,14,53],[14,46,14,54],[15,4,15,2],[15,10,15,8,"objectRefToRelease"],[15,28,15,26],[15,31,15,29],[15,35,15,29,"useRef"],[15,41,15,35],[15,42,15,35,"useRef"],[15,48,15,35],[15,50,15,58],[15,54,15,62],[15,55,15,63],[16,4,16,2],[16,10,16,8,"isFastRefresh"],[16,23,16,21],[16,26,16,24],[16,30,16,24,"useRef"],[16,36,16,30],[16,37,16,30,"useRef"],[16,43,16,30],[16,45,16,31],[16,50,16,36],[16,51,16,37],[17,4,17,2],[17,10,17,8,"previousDependencies"],[17,30,17,28],[17,33,17,31],[17,37,17,31,"useRef"],[17,43,17,37],[17,44,17,37,"useRef"],[17,50,17,37],[17,52,17,54,"dependencies"],[17,64,17,66],[17,65,17,67],[18,4,19,2],[18,8,19,6,"objectRef"],[18,17,19,15],[18,18,19,16,"current"],[18,25,19,23],[18,29,19,27],[18,33,19,31],[18,35,19,33],[19,6,20,4,"objectRef"],[19,15,20,13],[19,16,20,14,"current"],[19,23,20,21],[19,26,20,24,"factory"],[19,33,20,31],[19,34,20,32],[19,35,20,33],[20,4,21,2],[21,4,23,2],[21,10,23,8,"object"],[21,16,23,14],[21,19,23,17],[21,23,23,17,"useMemo"],[21,29,23,24],[21,30,23,24,"useMemo"],[21,37,23,24],[21,39,23,25],[21,45,23,31],[22,6,24,4],[22,10,24,8,"newObject"],[22,19,24,17],[22,22,24,20,"objectRef"],[22,31,24,29],[22,32,24,30,"current"],[22,39,24,37],[23,6,25,4],[23,12,25,10,"dependenciesAreEqual"],[23,32,25,30],[23,35,26,6,"previousDependencies"],[23,55,26,26],[23,56,26,27,"current"],[23,63,26,34],[23,65,26,36,"length"],[23,71,26,42],[23,76,26,47,"dependencies"],[23,88,26,59],[23,89,26,60,"length"],[23,95,26,66],[23,99,27,6,"dependencies"],[23,111,27,18],[23,112,27,19,"every"],[23,117,27,24],[23,118,27,25],[23,119,27,26,"value"],[23,124,27,31],[23,126,27,33,"index"],[23,131,27,38],[23,136,27,43,"value"],[23,141,27,48],[23,146,27,53,"previousDependencies"],[23,166,27,73],[23,167,27,74,"current"],[23,174,27,81],[23,175,27,82,"index"],[23,180,27,87],[23,181,27,88],[23,182,27,89],[25,6,29,4],[26,6,30,4],[27,6,31,4],[27,10,31,8],[27,11,31,9,"newObject"],[27,20,31,18],[27,24,31,22],[27,25,31,23,"dependenciesAreEqual"],[27,45,31,43],[27,47,31,45],[28,8,32,6,"objectRefToRelease"],[28,26,32,24],[28,27,32,25,"current"],[28,34,32,32],[28,37,32,35,"objectRef"],[28,46,32,44],[28,47,32,45,"current"],[28,54,32,52],[29,8,33,6,"newObject"],[29,17,33,15],[29,20,33,18,"factory"],[29,27,33,25],[29,28,33,26],[29,29,33,27],[30,8,34,6,"objectRef"],[30,17,34,15],[30,18,34,16,"current"],[30,25,34,23],[30,28,34,26,"newObject"],[30,37,34,35],[31,8,35,6,"previousDependencies"],[31,28,35,26],[31,29,35,27,"current"],[31,36,35,34],[31,39,35,37,"dependencies"],[31,51,35,49],[32,6,36,4],[33,6,37,4],[33,13,37,11,"newObject"],[33,22,37,20],[34,4,38,2],[34,5,38,3],[34,7,38,5,"dependencies"],[34,19,38,17],[34,20,38,18],[35,4,40,2],[35,8,40,2,"useEffect"],[35,14,40,11],[35,15,40,11,"useEffect"],[35,24,40,11],[35,26,40,12],[35,32,40,18],[36,6,41,4],[37,6,42,4],[38,6,43,4],[38,10,43,8,"objectRefToRelease"],[38,28,43,26],[38,29,43,27,"current"],[38,36,43,34],[38,38,43,36],[39,8,44,6,"objectRefToRelease"],[39,26,44,24],[39,27,44,25,"current"],[39,34,44,32],[39,35,44,33,"release"],[39,42,44,40],[39,43,44,41],[39,44,44,42],[40,8,45,6,"objectRefToRelease"],[40,26,45,24],[40,27,45,25,"current"],[40,34,45,32],[40,37,45,35],[40,41,45,39],[41,6,46,4],[42,4,47,2],[42,5,47,3],[42,7,47,5],[42,8,47,6,"object"],[42,14,47,12],[42,15,47,13],[42,16,47,14],[43,4,49,2],[43,8,49,2,"useMemo"],[43,14,49,9],[43,15,49,9,"useMemo"],[43,22,49,9],[43,24,49,10],[43,30,49,16],[44,6,50,4,"isFastRefresh"],[44,19,50,17],[44,20,50,18,"current"],[44,27,50,25],[44,30,50,28],[44,34,50,32],[45,4,51,2],[45,5,51,3],[45,7,51,5],[45,9,51,7],[45,10,51,8],[46,4,53,2],[46,8,53,2,"useEffect"],[46,14,53,11],[46,15,53,11,"useEffect"],[46,24,53,11],[46,26,53,12],[46,32,53,18],[47,6,54,4,"isFastRefresh"],[47,19,54,17],[47,20,54,18,"current"],[47,27,54,25],[47,30,54,28],[47,35,54,33],[48,6,56,4],[48,13,56,11],[48,19,56,17],[49,8,57,6],[50,8,58,6],[50,12,58,10],[50,13,58,11,"isFastRefresh"],[50,26,58,24],[50,27,58,25,"current"],[50,34,58,32],[50,38,58,36,"objectRef"],[50,47,58,45],[50,48,58,46,"current"],[50,55,58,53],[50,57,58,55],[51,10,59,8,"objectRef"],[51,19,59,17],[51,20,59,18,"current"],[51,27,59,25],[51,28,59,26,"release"],[51,35,59,33],[51,36,59,34],[51,37,59,35],[52,8,60,6],[53,6,61,4],[53,7,61,5],[54,4,62,2],[54,5,62,3],[54,7,62,5],[54,9,62,7],[54,10,62,8],[55,4,64,2],[55,11,64,9,"object"],[55,17,64,15],[56,2,65,0],[57,0,65,1],[57,3]],"functionMap":{"names":["<global>","useReleasingSharedObject","useMemo$argument_0","dependencies.every$argument_0","useEffect$argument_0","<anonymous>"],"mappings":"AAA;OCS;yBCa;yBCI,+DD;GDW;YGE;GHO;UCE;GDE;YGE;WCG;KDK;GHC;CDG"},"hasCjsExports":false},"type":"js/module"}]}