{"dependencies":[{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":69,"index":69}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":111},"end":{"line":3,"column":39,"index":150}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.authenticatedFetch = authenticatedFetch;\n  exports.getBackendURL = getBackendURL;\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[0], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[1], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _expoConstants = require(_dependencyMap[2], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  const BACKEND_URL = Constants.default.expoConfig?.extra?.backendUrl || process.env.EXPO_PUBLIC_BACKEND_URL || 'https://sinadicciones-app-production.up.railway.app';\n  // Helper to get token from storage (works on both web and mobile)\n  const getToken = async () => {\n    if (Platform.default.OS === 'web' && false) {\n      return localStorage.getItem('session_token');\n    }\n    return await AsyncStorage.default.getItem('session_token');\n  };\n\n  /**\n   * Helper function to make authenticated API requests\n   * Uses Authorization header with token from storage\n   * Automatically prepends BACKEND_URL if the url starts with /api\n   */\n  async function authenticatedFetch(url, options = {}) {\n    const headers = {\n      'Content-Type': 'application/json',\n      ...options.headers\n    };\n\n    // Add Authorization header with token from storage\n    const token = await getToken();\n    if (token) {\n      headers['Authorization'] = `Bearer ${token}`;\n    }\n\n    // Prepend BACKEND_URL if url starts with /api (relative URL)\n    const fullUrl = url.startsWith('/api') ? `${BACKEND_URL}${url}` : url;\n\n    // Make the request\n    return fetch(fullUrl, {\n      ...options,\n      headers,\n      credentials: 'include'\n    });\n  }\n\n  /**\n   * Get the backend URL\n   */\n  function getBackendURL() {\n    return BACKEND_URL;\n  }\n});","lineCount":63,"map":[[12,2,24,0,"exports"],[12,9,24,0],[12,10,24,0,"authenticatedFetch"],[12,28,24,0],[12,31,24,0,"authenticatedFetch"],[12,49,24,0],[13,2,50,0,"exports"],[13,9,50,0],[13,10,50,0,"getBackendURL"],[13,23,50,0],[13,26,50,0,"getBackendURL"],[13,39,50,0],[14,2,1,0],[14,6,1,0,"_reactNativeAsyncStorageAsyncStorage"],[14,42,1,0],[14,45,1,0,"require"],[14,52,1,0],[14,53,1,0,"_dependencyMap"],[14,67,1,0],[15,2,1,0],[15,6,1,0,"AsyncStorage"],[15,18,1,0],[15,21,1,0,"_interopDefault"],[15,36,1,0],[15,37,1,0,"_reactNativeAsyncStorageAsyncStorage"],[15,73,1,0],[16,2,1,69],[16,6,1,69,"_reactNativeWebDistExportsPlatform"],[16,40,1,69],[16,43,1,69,"require"],[16,50,1,69],[16,51,1,69,"_dependencyMap"],[16,65,1,69],[17,2,1,69],[17,6,1,69,"Platform"],[17,14,1,69],[17,17,1,69,"_interopDefault"],[17,32,1,69],[17,33,1,69,"_reactNativeWebDistExportsPlatform"],[17,67,1,69],[18,2,3,0],[18,6,3,0,"_expoConstants"],[18,20,3,0],[18,23,3,0,"require"],[18,30,3,0],[18,31,3,0,"_dependencyMap"],[18,45,3,0],[19,2,3,0],[19,6,3,0,"Constants"],[19,15,3,0],[19,18,3,0,"_interopDefault"],[19,33,3,0],[19,34,3,0,"_expoConstants"],[19,48,3,0],[20,2,5,0],[20,8,5,6,"BACKEND_URL"],[20,19,5,17],[20,22,5,20,"Constants"],[20,31,5,29],[20,32,5,29,"default"],[20,39,5,29],[20,40,5,30,"expoConfig"],[20,50,5,40],[20,52,5,42,"extra"],[20,57,5,47],[20,59,5,49,"backendUrl"],[20,69,5,59],[20,73,5,63,"process"],[20,80,5,70],[20,81,5,71,"env"],[20,84,5,74],[20,85,5,75,"EXPO_PUBLIC_BACKEND_URL"],[20,108,5,98],[20,112,5,102],[20,165,5,155],[21,2,11,0],[22,2,12,0],[22,8,12,6,"getToken"],[22,16,12,14],[22,19,12,17],[22,25,12,17,"getToken"],[22,26,12,17],[22,31,12,53],[23,4,13,2],[23,8,13,6,"Platform"],[23,16,13,14],[23,17,13,14,"default"],[23,24,13,14],[23,25,13,15,"OS"],[23,27,13,17],[23,32,13,22],[23,37,13,27],[23,46,13,60],[23,48,13,62],[24,6,14,4],[24,13,14,11,"localStorage"],[24,25,14,23],[24,26,14,24,"getItem"],[24,33,14,31],[24,34,14,32],[24,49,14,47],[24,50,14,48],[25,4,15,2],[26,4,16,2],[26,11,16,9],[26,17,16,15,"AsyncStorage"],[26,29,16,27],[26,30,16,27,"default"],[26,37,16,27],[26,38,16,28,"getItem"],[26,45,16,35],[26,46,16,36],[26,61,16,51],[26,62,16,52],[27,2,17,0],[27,3,17,1],[29,2,19,0],[30,0,20,0],[31,0,21,0],[32,0,22,0],[33,0,23,0],[34,2,24,7],[34,17,24,22,"authenticatedFetch"],[34,35,24,40,"authenticatedFetch"],[34,36,24,41,"url"],[34,39,24,52],[34,41,24,54,"options"],[34,48,24,75],[34,51,24,78],[34,52,24,79],[34,53,24,80],[34,55,24,101],[35,4,25,2],[35,10,25,8,"headers"],[35,17,25,39],[35,20,25,42],[36,6,26,4],[36,20,26,18],[36,22,26,20],[36,40,26,38],[37,6,27,4],[37,9,27,7,"options"],[37,16,27,14],[37,17,27,15,"headers"],[38,4,28,2],[38,5,28,3],[40,4,30,2],[41,4,31,2],[41,10,31,8,"token"],[41,15,31,13],[41,18,31,16],[41,24,31,22,"getToken"],[41,32,31,30],[41,33,31,31],[41,34,31,32],[42,4,32,2],[42,8,32,6,"token"],[42,13,32,11],[42,15,32,13],[43,6,33,4,"headers"],[43,13,33,11],[43,14,33,12],[43,29,33,27],[43,30,33,28],[43,33,33,31],[43,43,33,41,"token"],[43,48,33,46],[43,50,33,48],[44,4,34,2],[46,4,36,2],[47,4,37,2],[47,10,37,8,"fullUrl"],[47,17,37,15],[47,20,37,18,"url"],[47,23,37,21],[47,24,37,22,"startsWith"],[47,34,37,32],[47,35,37,33],[47,41,37,39],[47,42,37,40],[47,45,37,43],[47,48,37,46,"BACKEND_URL"],[47,59,37,57],[47,62,37,60,"url"],[47,65,37,63],[47,67,37,65],[47,70,37,68,"url"],[47,73,37,71],[49,4,39,2],[50,4,40,2],[50,11,40,9,"fetch"],[50,16,40,14],[50,17,40,15,"fullUrl"],[50,24,40,22],[50,26,40,24],[51,6,41,4],[51,9,41,7,"options"],[51,16,41,14],[52,6,42,4,"headers"],[52,13,42,11],[53,6,43,4,"credentials"],[53,17,43,15],[53,19,43,17],[54,4,44,2],[54,5,44,3],[54,6,44,4],[55,2,45,0],[57,2,47,0],[58,0,48,0],[59,0,49,0],[60,2,50,7],[60,11,50,16,"getBackendURL"],[60,24,50,29,"getBackendURL"],[60,25,50,29],[60,27,50,40],[61,4,51,2],[61,11,51,9,"BACKEND_URL"],[61,22,51,20],[62,2,52,0],[63,0,52,1],[63,3]],"functionMap":{"names":["<global>","getToken","authenticatedFetch","getBackendURL"],"mappings":"AAA;iBCW;CDK;OEO;CFqB;OGK;CHE"},"hasCjsExports":false},"type":"js/module"}]}